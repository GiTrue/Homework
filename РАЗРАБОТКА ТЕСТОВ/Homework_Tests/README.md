Домашнее задание «Разработка тестов»

Задача №1 unit-tests

Для создания юнит-тестов на предоставленные функции, будет использоваться библиотека pytest и ее возможности, включая параметризацию (@pytest.mark.parametrize) и фикстуры (@pytest.test.fixture) для мокирования внешних API-запросов с помощью requests_mock.

Будут разработаны тесты для каждой из трех функций:

translate_word (из файла Задание Переводчик.py)

get_the_smartest_superhero (из файла Кто самый умный супергерой (часть 1).py)

get_the_smartest_superhero (из файла Кто самый умный супергерой (часть 2).py)

Для тестов на функции, работающие с внешними API, необходимо мокирование (имитация) ответа API, чтобы тесты были быстрыми, надежными и не зависели от реальной доступности сервиса.


Тесты для 'Задание Переводчик.py'

Для функции translate_word, которая использует API Яндекс.Словаря, мы будем мокировать HTTP-запрос и его JSON-ответ.

Тесты для 'Кто самый умный супергерой (часть 1).py'

Для функции, которая запрашивает всех супергероев, мы мокируем API.

Тесты для 'Кто самый умный супергерой (часть 2).py'

Функция принимает список ID и делает отдельный запрос для каждого из них, поэтому мокирование должно быть более точным.



Задача №2 Автотест API Яндекса

Для выполнения этой задачи с использованием pytest и requests_mock (для мокирования в юнит-тестах) или requests (для интеграционных/функциональных тестов), нам потребуется:

1. Настоящий Токен Яндекса (для реального теста создания папки).

2. Базовый URL для Яндекс.Диска.

3. Мокированные ответы для юнит-тестов с ошибками.

Так как для реального тестирования API Яндекс.Диска нужен действующий OAuth-токен, который у меня отсутствует, я предоставлю структуру функционального теста, который должен быть запущен с реальным токеном (хранящимся в переменной окружения) и структуру юнит-тестов с использованием мокирования, чтобы проверить логику обработки ответов.

1. Функциональный тест: Создание папки (нужен реальный токен)
Этот тест будет обращаться к реальному API. Для его работы необходимо заменить YOUR_YANDEX_TOKEN на ваш настоящий токен и folder_name на уникальное имя папки.

2. Юнит-тесты: Проверка обработки ответов API (мокирование)
Юнит-тесты должны проверять, как функция create_yandex_folder обрабатывает различные HTTP-коды ответа. Для этого мы используем requests_mock.



Задача №3

Для выполнения задачи по написанию юнит-теста для авторизации на Яндексе с использованием Selenium и pytest, нам потребуется мокировать реальное взаимодействие с браузером. Однако, юнит-тесты по определению должны быть быстрыми и не должны зависеть от внешних систем (таких как браузер, сеть или реальный сайт).

Авторизация с использованием Selenium — это, по сути, интеграционный или функциональный тест, так как он требует запуска реального браузера (например, Chrome с помощью chromedriver).

Предоставлена структура функционального теста с использованием Selenium и Pytest.


Предварительная подготовка

1. Установка библиотек:

pip install pytest selenium webdriver-manager

2. Драйвер: Для упрощения управления драйверами используется библиотека webdriver-manager.


Структура функционального теста (test_yandex_login.py)

Этот тест будет выполнять следующие шаги:

1. Открыть страницу авторизации Яндекса.

2. Ввести логин и нажать "Войти".

3. Ввести пароль и нажать "Войти".

4. Проверить, что URL изменился, указывая на успешный вход (например, перенаправил на главную страницу или страницу профиля).

